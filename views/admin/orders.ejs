<%- include ('./partials/header') -%>
       

<section class="content-main">
	<div class="content-header">
		<div>
			<h2 class="content-title card-title">Order List </h2>
			<p>Lorem ipsum dolor sit amet.</p>
		</div>
		<div>
			<input type="text" placeholder="Search order ID" class="form-control bg-white">
		</div>
	</div>
	<div class="card mb-4">
		
		<div class="card-body">
			<div class="table-responsive">
				<table class="table table-hover" id="details">
					<thead>
						<tr>
							<th>#ID</th>
							<th scope="col">Name</th>
							<th scope="col">Email</th>
							<th scope="col">Total</th>
							<th scope="col">Status</th>
							<th scope="col">Date</th>
							<th scope="col" class="text-end"> Action </th>
						</tr>
					</thead>
                
					<tbody>
						<%orders.reverse().forEach((order)=>{%>
                        
						<tr>
							<td><%- order._id.toString().slice(-4) %></td>
							<td><b><%=order.userid.name%></b></td>
							<td><%=order.userid.email%></td>
							<td>â‚¹<%=order.totalAmount%>.00</td>
							<% if (order.status == "Delivered") { %>
								<td><span class="badge rounded-pill alert-success"><%=order.status%></span></td>
							<% } else if (order.status == "Pending") { %>
								<td><span class="badge rounded-pill alert-warning"><%=order.status%></span></td>
							<%} else { %>
								<td><span class="badge rounded-pill alert-primary"><%=order.status%></span></td>
							<%}%>
							<td><%=new Date(order.orderDate).toLocaleDateString()%></td>
							<td class="text-end">
								<a href="/admin/orderdetails?id=<%=order._id%>" class="btn btn-md rounded font-sm">Detail</a>
								<!-- <div class="dropdown">
									<a href="#" data-bs-toggle="dropdown" class="btn btn-light rounded btn-sm font-sm"> <i class="material-icons md-more_horiz"></i> </a>
									<div class="dropdown-menu">
										<a class="dropdown-item" href="#">View detail</a>
										<a class="dropdown-item" href="#">Edit info</a>
										<a class="dropdown-item text-danger" href="#">Delete</a>
									</div>
								</div>  -->
							</td>
						</tr>
						<%})%>
					</tbody>
				</table>
			</div> <!-- table-responsive //end -->
		</div> <!-- card-body end// -->
	</div> <!-- card end// -->
</section>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.js"></script>

    <script>
        $(document).ready(function() {
            $('#details').DataTable();
          });
    
        </script>